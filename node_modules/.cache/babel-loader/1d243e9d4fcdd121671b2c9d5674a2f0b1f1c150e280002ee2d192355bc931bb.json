{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { useContext, useEffect } from \"react\";\nimport { DocViewerContext } from \"../state\";\nimport { setDocumentLoading, updateCurrentDocument } from \"../state/actions\";\nimport { defaultFileLoader } from \"./fileLoaders\";\nimport { useRendererSelector } from \"./useRendererSelector\";\n/**\n * Custom Hook for loading the current document into context\n */\nexport var useDocumentLoader = function () {\n  var _a = useContext(DocViewerContext),\n    state = _a.state,\n    dispatch = _a.dispatch;\n  var currentFileNo = state.currentFileNo,\n    currentDocument = state.currentDocument;\n  var CurrentRenderer = useRendererSelector().CurrentRenderer;\n  var documentURI = (currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.uri) || \"\";\n  useEffect(function () {\n    if (!currentDocument) return;\n    if (currentDocument.fileType !== undefined) return;\n    var controller = new AbortController();\n    var signal = controller.signal;\n    fetch(documentURI, {\n      method: \"HEAD\",\n      signal: signal\n    }).then(function (response) {\n      var contentTypeRaw = response.headers.get(\"content-type\");\n      var contentTypes = (contentTypeRaw === null || contentTypeRaw === void 0 ? void 0 : contentTypeRaw.split(\";\")) || [];\n      var contentType = contentTypes.length ? contentTypes[0] : undefined;\n      dispatch(updateCurrentDocument(__assign(__assign({}, currentDocument), {\n        fileType: contentType || undefined\n      })));\n    });\n    return function () {\n      controller.abort();\n    };\n  },\n  // eslint ignore added, because a warning appears for dispatch to\n  // be a dependancy of the useEffect\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [currentFileNo, documentURI]);\n  useEffect(function () {\n    var _a;\n    if (!currentDocument || CurrentRenderer === undefined) return;\n    var controller = new AbortController();\n    var signal = controller.signal;\n    var fileLoaderComplete = function (fileReader) {\n      if (!currentDocument || !fileReader) {\n        dispatch(setDocumentLoading(false));\n        return;\n      }\n      var updatedDocument = __assign({}, currentDocument);\n      if (fileReader.result !== null) {\n        updatedDocument.fileData = fileReader.result;\n      }\n      dispatch(updateCurrentDocument(updatedDocument));\n      dispatch(setDocumentLoading(false));\n    };\n    if (CurrentRenderer === null) {\n      dispatch(setDocumentLoading(false));\n    } else if (CurrentRenderer.fileLoader !== undefined) {\n      (_a = CurrentRenderer.fileLoader) === null || _a === void 0 ? void 0 : _a.call(CurrentRenderer, {\n        documentURI: documentURI,\n        signal: signal,\n        fileLoaderComplete: fileLoaderComplete\n      });\n    } else {\n      defaultFileLoader({\n        documentURI: documentURI,\n        signal: signal,\n        fileLoaderComplete: fileLoaderComplete\n      });\n    }\n    return function () {\n      controller.abort();\n    };\n  }, [CurrentRenderer]);\n  return {\n    state: state,\n    dispatch: dispatch,\n    CurrentRenderer: CurrentRenderer\n  };\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","useContext","useEffect","DocViewerContext","setDocumentLoading","updateCurrentDocument","defaultFileLoader","useRendererSelector","useDocumentLoader","_a","state","dispatch","currentFileNo","currentDocument","CurrentRenderer","documentURI","uri","fileType","undefined","controller","AbortController","signal","fetch","method","then","response","contentTypeRaw","headers","get","contentTypes","split","contentType","abort","fileLoaderComplete","fileReader","updatedDocument","result","fileData","fileLoader"],"sources":["D:/sumit/hfc/wrm/node_modules/react-doc-viewer/build/utils/useDocumentLoader.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useContext, useEffect } from \"react\";\nimport { DocViewerContext } from \"../state\";\nimport { setDocumentLoading, updateCurrentDocument, } from \"../state/actions\";\nimport { defaultFileLoader } from \"./fileLoaders\";\nimport { useRendererSelector } from \"./useRendererSelector\";\n/**\n * Custom Hook for loading the current document into context\n */\nexport var useDocumentLoader = function () {\n    var _a = useContext(DocViewerContext), state = _a.state, dispatch = _a.dispatch;\n    var currentFileNo = state.currentFileNo, currentDocument = state.currentDocument;\n    var CurrentRenderer = useRendererSelector().CurrentRenderer;\n    var documentURI = (currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.uri) || \"\";\n    useEffect(function () {\n        if (!currentDocument)\n            return;\n        if (currentDocument.fileType !== undefined)\n            return;\n        var controller = new AbortController();\n        var signal = controller.signal;\n        fetch(documentURI, { method: \"HEAD\", signal: signal }).then(function (response) {\n            var contentTypeRaw = response.headers.get(\"content-type\");\n            var contentTypes = (contentTypeRaw === null || contentTypeRaw === void 0 ? void 0 : contentTypeRaw.split(\";\")) || [];\n            var contentType = contentTypes.length ? contentTypes[0] : undefined;\n            dispatch(updateCurrentDocument(__assign(__assign({}, currentDocument), { fileType: contentType || undefined })));\n        });\n        return function () {\n            controller.abort();\n        };\n    }, \n    // eslint ignore added, because a warning appears for dispatch to\n    // be a dependancy of the useEffect\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [currentFileNo, documentURI]);\n    useEffect(function () {\n        var _a;\n        if (!currentDocument || CurrentRenderer === undefined)\n            return;\n        var controller = new AbortController();\n        var signal = controller.signal;\n        var fileLoaderComplete = function (fileReader) {\n            if (!currentDocument || !fileReader) {\n                dispatch(setDocumentLoading(false));\n                return;\n            }\n            var updatedDocument = __assign({}, currentDocument);\n            if (fileReader.result !== null) {\n                updatedDocument.fileData = fileReader.result;\n            }\n            dispatch(updateCurrentDocument(updatedDocument));\n            dispatch(setDocumentLoading(false));\n        };\n        if (CurrentRenderer === null) {\n            dispatch(setDocumentLoading(false));\n        }\n        else if (CurrentRenderer.fileLoader !== undefined) {\n            (_a = CurrentRenderer.fileLoader) === null || _a === void 0 ? void 0 : _a.call(CurrentRenderer, { documentURI: documentURI, signal: signal, fileLoaderComplete: fileLoaderComplete });\n        }\n        else {\n            defaultFileLoader({ documentURI: documentURI, signal: signal, fileLoaderComplete: fileLoaderComplete });\n        }\n        return function () {\n            controller.abort();\n        };\n    }, [CurrentRenderer]);\n    return { state: state, dispatch: dispatch, CurrentRenderer: CurrentRenderer };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}